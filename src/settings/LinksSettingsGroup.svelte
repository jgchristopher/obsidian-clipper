<script lang="ts">
	import { BookmarketlGenerator } from 'src/bookmarkletlink/bookmarkletgenerator';

	import BookmarkletSettingsGroup from './BookmarkletSettingsGroup.svelte';
	import ExtensionSettingsGroup from './ExtensionSettingsGroup.svelte';
	import type { ObsidianClipperSettings } from './types';
	import type { Writable } from 'svelte/store';

	export let settings: Writable<ObsidianClipperSettings>;

	let clipperHref = new BookmarketlGenerator(
		$settings.clipperId,
		$settings.vaultName,
		$settings.notePath,
		$settings.markdownSettings,
		$settings.captureComments.toString()
	).generateBookmarklet();

	let updateClipperHref = () => {
		clipperHref = new BookmarketlGenerator(
			$settings.clipperId,
			$settings.vaultName,
			$settings.notePath,
			$settings.markdownSettings,
			$settings.captureComments.toString()
		).generateBookmarklet();
	};
</script>

<div class="clp_section_margin">
	<BookmarkletSettingsGroup {clipperHref} clipperName={$settings.name} />
	<ExtensionSettingsGroup {clipperHref} clipperName={$settings.name} />
</div>

<div class="clp_section_margin">
	<h1>Bookmarklet Settings</h1>
	<div class="setting-item">
		<div class="setting-item-info">
			<div class="setting-item-name">Capture Comment in Browser</div>
			<div class="setting-item-description">
				Display a modal in the browser to capture any comments before sending to
				Obsidian?
			</div>
		</div>
		<div class="setting-item-control">
			<input
				type="checkbox"
				bind:checked={$settings.captureComments}
				on:change={updateClipperHref}
			/>
		</div>
	</div>
	<div class="setting-item">
		<div class="setting-item-info">
			<h1 class="setting-item-name">Markdown Headings</h1>
		</div>
	</div>
	<div class="setting-item">
		<div class="setting-item-info">
			<div class="setting-item-name">H2</div>
			<div class="setting-item-description">
				What should replace H2 elements found in the highlight data?
			</div>
		</div>
		<div class="setting-item-control">
			<input
				type="text"
				bind:value={$settings.markdownSettings.h2}
				spellcheck="false"
				placeholder=""
			/>
		</div>
	</div>
	<div class="setting-item">
		<div class="setting-item-info">
			<div class="setting-item-name">H3</div>
			<div class="setting-item-description">
				What should replace H3 elements found in the highlight data?
			</div>
		</div>
		<div class="setting-item-control">
			<input
				type="text"
				bind:value={$settings.markdownSettings.h3}
				spellcheck="false"
				placeholder=""
			/>
		</div>
	</div>
	<div class="setting-item">
		<div class="setting-item-info">
			<div class="setting-item-name">H4</div>
			<div class="setting-item-description">
				What should replace H4 elements found in the highlight data?
			</div>
		</div>
		<div class="setting-item-control">
			<input
				type="text"
				bind:value={$settings.markdownSettings.h4}
				spellcheck="false"
				placeholder=""
			/>
		</div>
	</div>
	<div class="setting-item">
		<div class="setting-item-info">
			<div class="setting-item-name">H5</div>
			<div class="setting-item-description">
				What should replace H5 elements found in the highlight data?
			</div>
		</div>
		<div class="setting-item-control">
			<input
				type="text"
				bind:value={$settings.markdownSettings.h5}
				spellcheck="false"
				placeholder=""
			/>
		</div>
	</div>
	<div class="setting-item">
		<div class="setting-item-info">
			<div class="setting-item-name">H6</div>
			<div class="setting-item-description">
				What should replace H6 elements found in the highlight data?
			</div>
		</div>
		<div class="setting-item-control">
			<input
				type="text"
				bind:value={$settings.markdownSettings.h6}
				spellcheck="false"
				placeholder=""
			/>
		</div>
	</div>
</div>
